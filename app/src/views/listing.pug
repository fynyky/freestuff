extends base.pug

block append vars
  - var stylesheet='/listing.css'
  - var script='/listing.js'

block main

  //- View an existing listing
  if listing
    .listing
      .image-field
        img.preview(src=listing.imageURL)
        
      .fields
      
        .field
          p.description= listing.description
          .tags
            .tag
              label Category
              = listing.category
            .tag
              label Location
              = listing.location
        .field.reminder
          | Before contacting the donor please remember
          ul 
            li Be appreciative. Everything here is being given away for free
            li Be gracious! It's not anyones fault if the item is not quite what you want or the donor is unable to deliver
            li More terms TBD
          
        if user
          .field.collection
            label Collection Instructions
            p= listing.collection
          .field.contact
            label Contact Information
            p= listing.contact
        else
          .field 
            .blockPrompt
              a.button.primary(href='/login') Sign in
              p to see collection instructions and contact information


        if user && listing.owner == user.id
          form#deleteForm(action=("/listing/delete/" + listing.id) method="POST" enctype="multipart/form-data")
            input#delete(type="submit" value="Remove Listing")

    //- Delete confirmation overlay
    .overlay.hidden
      p Remove this listing?
      .buttons
        button.button.hint#cancel(type="submit") Cancel
        button.button.hint#confirm(type="submit") Remove

    //- Delete confirmation overlay
    //- .overlay
    //-   p Remove this listing?
    //-   .buttons
    //-     button.primary I understand

  //- Creating a new listing
  else
    form.listing(action="listing" method="POST" enctype="multipart/form-data")
      .image-field 
        i.fa-solid.fa-image
        label.button.primary(for="file") Add a photo
        input(type='file' id="file" name="file" capture="environment" accept="image/*")
        img.preview.hidden(src="data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==")
        label.button.hint.change.hidden(for="file") Change photo

      .fields.input
        .field
          label(for="category") Category 
          select#category(name='category' required)
            option(value='' selected disabled hidden) - Choose a category -
            option(value='books') Books
            option(value='clothes') Clothes
            option(value='electronics') Electronics
            option(value='furniture') Furniture
            option(value='appliances') Home Appliances
            option(value='infant') Infant and children
            option(value='school') School supplies
            option(value='sports') Sports equipment
            option(value='tools') Tools
            option(value='toys') Toys &amp; Games
            option(value='others') Others
        .field
          label(for="description") Description
          input(
            id="description" name="description" type="text"
            placeholder="What are you giving away? This helps us get it into the right hands!"
          )
        .field
          label(for="location") Location 
          select#location(name='location' required)
            option(value='' selected disabled hidden) - Choose a location -
            option(value='ang moh kio') Ang Moh Kio
            option(value='bedok') Bedok
            option(value='bishan') Bishan
            option(value='boon lay') Boon Lay
            option(value='bukit batok') Bukit Batok
            option(value='bukit merah') Bukit Merah
            option(value='bukit panjang') Bukit Panjang
            option(value='bukit timah') Bukit Timah
            option(value='changi') Changi
            option(value='changi bay') Changi Bay
            option(value='choa chu kang') Choa Chu Kang
            option(value='clementi') Clementi
            option(value='downtown core') Downtown Core
            option(value='geylang') Geylang
            option(value='hougang') Hougang
            option(value='jurong east') Jurong East
            option(value='jurong west') Jurong West
            option(value='kallang') Kallang
            option(value='lim chu kang') Lim Chu Kang
            option(value='mandai') Mandai
            option(value='marina east') Marina East
            option(value='marina south') Marina South
            option(value='marine parade') Marine Parade
            option(value='newton') Newton
            option(value='novena') Novena
            option(value='orchard') Orchard
            option(value='outram') Outram
            option(value='pasir ris') Pasir Ris
            option(value='paya lebar') Paya Lebar
            option(value='pioneer') Pioneer
            option(value='punggol') Punggol
            option(value='queenstown') Queenstown
            option(value='river valley') River Valley
            option(value='rochor') Rochor
            option(value='seletar') Seletar
            option(value='sembawang') Sembawang
            option(value='sengkang') Sengkang
            option(value='serangoon') Serangoon
            option(value='simpang') Simpang
            option(value='straits view') Straits View
            option(value='sungei kadut') Sungei Kadut
            option(value='tampines') Tampines
            option(value='tanglin') Tanglin
            option(value='tengah') Tengah
            option(value='toa payoh') Toa Payoh
            option(value='tuas') Tuas
            option(value='woodlands') Woodlands
            option(value='yishun') Yishun
        .field
          label(for="collection") Collection Instructions
          input(
            id="collection" name="collection" type="text" 
            placeholder="Can you deliver to charities? If not how should it be collected?"
          )
        .field
          label(for="contact") Contact Details
          input(
            id="contact" name="contact" type="text" 
            placeholder="Should people contact you by whatsapp/emai/some other way?"
          )
        .field.reminder
          | Before creating a listing please remember
          ul 
            li The only currency here is compassion. List only your good quality non-food items that you would like to give away to those who need it.
            li Read our <a href="/terms">Terms of Use</a> for full details on what items should not be listed.
        .field
          button.primary(type="submit") List item

